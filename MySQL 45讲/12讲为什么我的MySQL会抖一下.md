> 有些时候SQL执行会突然抖动,正常执行很快,但是突然就特别慢,而且很难复现这种场景

## 为什么SQL语句变慢了
- 偶尔抖一下有可能是在刷新内存中的[脏页](00tips.md#脏页)
- 在以下情况会出现脏页的刷新
	- redo log写满了,此时系统会停止所有更新操作,吧 [02讲日志系统;一条SQL更新语句是如何执行的](02讲日志系统;一条SQL更新语句是如何执行的.md) 往前推(刷新到磁盘中)
	- 当系统内存不足是,需要新的内存也,则需要淘汰一些脏页(刷新他们到磁盘)
		- 虽然可以直接淘汰内存,并记录下次访问脏页时,从redo log中恢复,但是这种方案性能过差
		- 数据页的两种状态:
			- 内存中存在,内存中的数据页可能是脏页,但是一定是最新的
			- 内存中没有,他一定是干净页,但是访问他需要先把他读入到内存中
	- 在系统触发刷新redolog的时候新的请求进来了
	- 当MySQL关闭时,需要刷新内存中所有的脏页

## InnoDB用缓冲池管理内存
- 缓冲池中内存页也有三种状态
	- 没有使用的的内存
	- 使用了,并且存放的是干净页
	- 使用了,并且存放的是脏页
- InnoDB的策略是尽量使用内存,因此